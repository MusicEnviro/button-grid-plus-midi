{"version":3,"sources":["player/soundfont-player.ts","App.tsx","index.tsx"],"names":["Player","piano","initialized","AudioContext","window","webkitAudioContext","Soundfont","this","console","log","emit","harmonic","note","frequency","Math","log2","play","duration","attack","decay","sustain","init","EventEmitter","App","midiSounds","player","row","column","index","playNote","className","id","onButtonDown","col","handleButton","React","Component","ReactDOM","render","document","getElementById"],"mappings":"sTAOO,IAAMA,EAAb,4MACCC,WADD,IAECC,aAAuB,EAFxB,sKAKEC,aAAeC,OAAOD,cAAiBC,OAAeC,mBALxD,SAMqBC,aAAqB,IAAIH,aAAgB,WAN9D,OAMEI,KAAKN,MANP,OAOEO,QAAQC,IAAI,qBACZF,KAAKG,KAAK,SACVH,KAAKL,aAAc,EATrB,qIAYUS,GACR,GAAKJ,KAAKL,YAEH,CAEN,IAAMU,GArBWC,EAqBkB,GAAXF,EApBnB,GAAK,GAAKG,KAAKC,KAAKF,EAAY,MAsBrCN,KAAKN,MAAMe,KAAKJ,EAAM,EAAG,CAACK,SAAU,EAAGC,OAAQ,IAAMC,MAAO,GAAKC,QAAS,SAL1Eb,KAAKc,OAlBR,IAAoBR,MAIpB,G,MAA4BS,cC4BbC,E,4MA3BdC,gB,IACAC,OAAS,IAAIzB,E,kEAGZO,KAAKkB,OAAOJ,S,mCAGAK,EAAaC,GAEzB,IAAMC,EAAoB,GAAX,EAAIF,GAAWC,EAC9BpB,KAAKkB,OAAOI,SAASD,EAAQ,K,+BAIpB,IAAD,OAET,OACC,yBAAKE,UAAU,OAEd,0DACA,yBAAKC,GAAG,QACP,kBAAC,aAAD,CAAYC,aAAc,SAACN,EAAKO,GAAN,OAAc,EAAKC,aAAaR,EAAKO,Y,GAvBjDE,IAAMC,WCFxBC,IAASC,OACL,kBAAC,EAAD,MACFC,SAASC,eAAe,W","file":"static/js/main.d2cffcc5.chunk.js","sourcesContent":["import * as Soundfont from 'soundfont-player';\nimport { EventEmitter } from 'events'\n\nfunction freqToMidi(frequency: number) {\n\treturn 69 + 12 * Math.log2(frequency / 440);\n  };\n\nexport class Player extends EventEmitter {\n\tpiano: any;\n\tinitialized: boolean = false;\n\n\tasync init() {\n\t\tAudioContext = window.AudioContext || (window as any).webkitAudioContext;\n\t\tthis.piano = await Soundfont.instrument(new AudioContext(), 'kalimba')\n\t\tconsole.log('instrument loaded')\n\t\tthis.emit('ready')\n\t\tthis.initialized = true\n\t}\n\n\tplayNote(harmonic: number) {\n\t\tif (!this.initialized) {\n\t\t\tthis.init()\n\t\t} else {\n\n\t\t\tconst note = freqToMidi(harmonic * 50)\n\t\t\t\n\t\t\tthis.piano.play(note, 0, {duration: 2, attack: 0.01, decay: 0.5, sustain: 0})\n\t\t}\n\t}\n}","import React from 'react';\nimport './App.css';\n\nimport { ButtonGrid } from '@musicenviro/ui-elements';\nimport { Player } from './player/soundfont-player';\n\nclass App extends React.Component {\n\t\n\tmidiSounds: any;\n\tplayer = new Player();\n\n\tcomponentDidMount() {\n\t\tthis.player.init()\n\t}\n\n\thandleButton(row: number, column: number) {\n\n\t\tconst index = (3 - row) * 4 + column;\n\t\tthis.player.playNote(index + 1)\n\t\t\n\t}\n\n\trender() {\n\n\treturn (\n\t\t<div className=\"App\">\n\n\t\t\t<header>Harmonic Series M'bira</header>\n\t\t\t<div id=\"main\">\n\t\t\t\t<ButtonGrid onButtonDown={(row, col) => this.handleButton(row, col)}/>\n\t\t\t</div>\n\t\t</div>\n\t)}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}